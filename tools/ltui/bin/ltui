#!/usr/bin/env node

import('../dist/cli.js')
  .then(mod => {
    if (typeof mod.main === 'function') {
      const result = mod.main(process.argv.slice(2));
      if (result && typeof result.then === 'function') {
        result.catch(err => {
          console.error('ERROR: cli_runtime_failed', err?.message ?? String(err));
          process.exit(1);
        });
      }
    } else {
      console.error('ERROR: cli_load_failed Missing main export');
      process.exit(1);
    }
  })
  .catch(err => {
    console.error('ERROR: cli_load_failed', err?.message ?? String(err));
    process.exit(1);
  });
